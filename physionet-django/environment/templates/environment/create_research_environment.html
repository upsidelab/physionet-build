{% extends 'base.html' %}

{% load static %}

{% load project_templatetags %}

{% block title %}Create Research Environment{% endblock %}

{% block local_css %}
<link rel="stylesheet" type="text/css" href="{% static 'project/css/project-home.css' %}">
{% endblock %}

{% block content %}
<div class="container">
  {% include "message_snippet.html" %}
    <h1 class="mb-5">
      Create Research Environment
    </h1>

    <h3>
        Project: {{ project.title }}
    </h3>

    <form action="{% url 'create_research_environment' project_slug=project.slug %}" method="post" style="width: 24rem;">
    {% csrf_token %}
    {{ form }}
    <button class="btn btn-sm btn-primary mt-3" type="submit">
        Create environment
    </button>
    </form>
</div>
{% endblock %}

{% block local_js_bottom %}
<script>
  (function() {
    const jupyterTypeRadioButton = document.querySelector("#id_environment_type input[value='jupyter']");
    const rstudioTypeRadioButton = document.querySelector("#id_environment_type input[value='rstudio']");
    const persistentDiskInput = document.getElementById("id_persistent_disk");

    persistentDiskInput.disabled = !jupyterTypeRadioButton.checked;
    jupyterTypeRadioButton.addEventListener("change", function() {
      persistentDiskInput.disabled = false;
    });
    rstudioTypeRadioButton.addEventListener("change", function() {
      persistentDiskInput.disabled = true;
    });
  })();
</script>
{% endblock %}